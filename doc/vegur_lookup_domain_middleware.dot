digraph vegur_lookup_domain_middleware {
        request [shape=Mdiamond];
        execute [label="execute/2"]
        request -> execute;
        execute -> lookup_domain_name;
        lookup_domain_name -> handle_domain_lookup;
        handle_domain_lookup -> response_404 [label="{error, not_found}"];
        handle_domain_lookup -> response_301 [label="{redirect, herokuapp_redirect, ...}"];
        handle_domain_lookup -> set_request_meta [label="{ok, DomainGroup}"];
        set_request_meta -> continue;
        continue [shape=cds];
        response_404 -> end;
        response_301 -> end;
        end [shape=Msquare];
}
